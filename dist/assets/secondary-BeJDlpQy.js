let r=[],y=!1,h=!1;const V=document.querySelectorAll(".option__how"),x=document.querySelectorAll(".option__type"),L=document.querySelectorAll(".option__weight"),C=document.querySelectorAll(".option__sensory"),k=document.querySelectorAll(".option__time"),P=document.querySelector("#step2"),v=document.querySelectorAll(".accordion-content"),F=document.querySelector("#step3"),N=document.querySelector("#step4"),R=document.querySelector("#step5");document.querySelectorAll(".accordion-content");const $=F.querySelector(".accordion-content"),I=N.querySelector(".accordion-content"),T=R.querySelector(".accordion-content");document.querySelectorAll(".capsuleTrue");const B=document.querySelector(".btn__plan"),p=document.querySelector("#errorPlan"),d=document.querySelector(".plan__text"),D=document.querySelector(".span__content"),b=document.querySelector(".span__order");let i=null;document.querySelectorAll(".step");const u=document.querySelectorAll(".step_circle"),_=document.querySelector(".line");document.querySelectorAll(".option");const E=document.querySelectorAll(".menuPlan");let S=1;console.log(h);const W=()=>{V.forEach(e=>e.addEventListener("click",()=>{const n=r.find(o=>o.Option);n?n.Option=e.id:r.push({Option:e.id}),console.log(r),y=e.id==="capsule",console.log("¿Capsule seleccionado?:",y),V.forEach(o=>{o.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),o.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),e.classList.add("active","bg-Dark-Cyan","text-Very-light-button"),e.classList.remove("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange");const t=P.querySelector(".accordion-content"),s=P.querySelector(".narrow");s&&(s.classList.remove(".rotate-0"),s.classList.add("rotate-180")),t&&(t.classList.remove("max-h-0"),t.classList.add("h-auto")),y&&(r=[r[0]],A(),console.log("Array de planes borrados:",r),h=!0,v.forEach((o,l)=>{l>1?(o.classList.remove("max-h-full"),o.classList.add("max-h-0")):o.classList.replace("max-h-0","h-auto"),u.forEach((c,a)=>{a!==0&&(c.classList.remove("opacity-100"),c.classList.add("opacity-0"),_.style.width=0)})}),x.forEach(o=>{o.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),o.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),L.forEach(o=>{o.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),o.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),C.forEach(o=>{o.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),o.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),k.forEach(o=>m(o))),h&&!y&&(h=!1,r=[r[0]],A(),console.log("Array de planes borrados:",r),v.forEach((o,l)=>{l>1&&(o.classList.remove("max-h-full"),o.classList.add("max-h-0"))}),u.forEach((o,l)=>{l!==0&&(o.classList.remove("opacity-100"),o.classList.add("opacity-0"),_.style.width=0)}),x.forEach(o=>m(o)),L.forEach(o=>m(o)),C.forEach(o=>m(o)),k.forEach(o=>m(o))),console.log(h)}))},m=e=>{e.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),e.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange"),document.querySelectorAll(".step").forEach((t,s)=>{if(s>=S){const o=t.querySelector(".narrow");o&&(o.classList.remove("rotate-180"),o.classList.add("rotate-0"),console.log(`Ícono en step ${s+1} reseteado a 0 grados`))}}),E.forEach((t,s)=>{s>=S&&(t.classList.remove("text-Dark-Cyan"),t.classList.add("text-Very-Dark-Cyan"),console.log(`Color reseteado para el menú en el índice: ${s}`))})},j=()=>{W(),x.forEach(e=>{e.addEventListener("click",()=>{const n=r.find(s=>s.Type);n?n.Type=e.id:r.push({Type:e.id}),console.log(r),x.forEach(s=>{s.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),s.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),e.classList.add("active","bg-Dark-Cyan","text-Very-light-button"),e.classList.remove("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange");const t=w(e);y?(T.classList.replace("max-h-0","h-auto"),I.classList.replace("h-auto","max-h-0"),$.classList.replace("h-auto","max-h-0"),r.push({Weight:"no"}),r.push({Sensory:"no"}),g(t),X()):($.classList.replace("max-h-0","h-auto"),q(t),g(t))})})},z=()=>{L.forEach(e=>{e.addEventListener("click",()=>{const n=r.find(s=>s.Weight);n?n.Weight=e.id:r.push({Weight:e.id}),console.log(r),L.forEach(s=>{s.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),s.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),e.classList.add("active","bg-Dark-Cyan","text-Very-light-button"),e.classList.remove("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange"),y?T.classList.replace("max-h-0","h-auto"):I.classList.replace("max-h-0","h-auto");const t=w(e);q(t),g(t)})})},G=()=>{C.forEach(e=>{e.addEventListener("click",()=>{const n=r.find(s=>s.Sensory);n?n.Sensory=e.id:r.push({Sensory:e.id}),console.log(r),C.forEach(s=>{s.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),s.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),e.classList.add("active","bg-Dark-Cyan","text-Very-light-button"),e.classList.remove("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange"),T.classList.replace("max-h-0","h-auto");const t=w(e);q(t),g(t)})})},J=()=>{k.forEach(e=>{e.addEventListener("click",()=>{const n=r.find(s=>s.Time);n?n.Time=e.id:r.push({Time:e.id}),console.log(r),k.forEach(s=>{s.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),s.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),e.classList.add("active","bg-Dark-Cyan","text-Very-light-button"),e.classList.remove("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange");const t=w(e);g(t),u.forEach((s,o)=>{if(o===1){const l=u[0].getBoundingClientRect().left,a=s.getBoundingClientRect().left-l;s.classList.remove("opacity-0"),s.classList.add("opacity-100"),_.style.width=`${a}px`,console.log(`Línea ajustada a ${a}px de ancho`)}})})})},K=()=>{const e=document.querySelector(".price__text");let n=0,t=0,s=0,o=0;B.addEventListener("click",()=>{const l=["Option","Type","Weight","Sensory","Time"];let c=[],a={};l.forEach(f=>{const O=r.find(M=>M[f]);O?a[f]=O[f]:c.push(f)}),a.Option&&(a.Option.toLowerCase()==="capsule"?n=5.4:a.Option.toLowerCase()==="filter"?n=6.2:a.Option.toLowerCase()==="espresso"&&(n=7)),a.Type&&(a.Type.toLowerCase()==="premium"?s=12:a.Type.toLowerCase()==="decaf"?s=7:a.Type.toLowerCase()==="normal"&&(s=8)),a.Weight&&(a.Weight==="small"?a.Time==="weekly"?t=7.2*4:a.Time==="two__weeks"?t=9.6*2:a.Time==="monthly"&&(t=12):a.Weight==="medium"?a.Time==="weekly"?t=13*4:a.Time==="two__weeks"?t=17.5*2:a.Time==="monthly"&&(t=22):a.Weight==="large"?a.Time==="weekly"?t=22*4:a.Time==="two__weeks"?t=32*2:a.Time==="monthly"&&(t=42):a.Weight==="no"&&(a.Time==="weekly"?t=16*4:a.Time==="two__weeks"?t=30*2:a.Time==="monthly"&&(t=55)));let H=(n+s)*o+t;e.innerHTML=`$${H.toFixed(2)}`,y?y&&c.length===0&&(console.log("El plan está completo:",a),p.innerHTML="",p.classList.replace("h-12","max-h-0"),d.classList.remove("max-h-0","p-0"),d.classList.add("p-10"),b.classList.replace("hidden","flex"),i=document.createElement("p"),i.className="text-pretty font-fraunces text-2xl/10 font-black",i.innerHTML=`
                                "I drink my coffee using 
                                <span class="how__result text-Dark-Cyan">${a.Option}</span>, with a
                                <span class="type__result text-Dark-Cyan">${a.Type}</span> type of bean. And sent to me
                                
                                <span class="time__result text-Dark-Cyan">${a.Time}</span>.”
                            `,D.prepend(i),d.innerHTML=`
            <article class="flex flex-col w-full">
                <div class="flex w-full">
                    <span class="uppercase opacity-50 text-white text-start">Order Summary</span>
                </div>
                <div class="mt-2 text-white">
                    <p class="text-pretty font-fraunces text-2xl/10 font-black">
                        “I drink my coffee as 
                        <span class="how__result text-Dark-Cyan">${a.Option}</span>, 
                        with a <span class="type__result text-Dark-Cyan">${a.Type}</span> 
                        type of bean. 
                        <span class="weight__result text-Dark-Cyan">${a.Weight}</span> ground ala 
                        <span class="sensory__result text-Dark-Cyan">${a.Sensory}</span>, 
                        sent to me <span class="time__result text-Dark-Cyan">${a.Time}</span>.”
                    </p>
                </div>
            </article>
            `):c.length===0&&(console.log("El plan está completo:",a),p.innerHTML="",p.classList.replace("h-12","max-h-0"),d.classList.remove("max-h-0","p-0"),d.classList.add("p-10"),b.classList.replace("hidden","flex"),i=document.createElement("p"),i.className="text-pretty font-fraunces text-2xl/10 font-black",i.innerHTML=`
                                “I drink my coffee as
                                <span class="how__result text-Dark-Cyan">${a.Option}</span>, with a
                                <span class="type__result text-Dark-Cyan">${a.Type}</span> type of bean.
                                <span class="weight__result text-Dark-Cyan">${a.Weight}</span> ground ala
                                <span class="sensory__result text-Dark-Cyan">${a.Sensory}</span>, sent to me
                                <span class="time__result text-Dark-Cyan">${a.Time}</span>.”
                            `,D.prepend(i),d.innerHTML=`
            <article class="flex flex-col w-full">
                <div class="flex w-full">
                    <span class="uppercase opacity-50 text-white text-start">Order Summary</span>
                </div>
                <div class="mt-2 text-white">
                    <p class="text-pretty font-fraunces text-2xl/10 font-black">
                        “I drink my coffee as 
                        <span class="how__result text-Dark-Cyan">${a.Option}</span>, 
                        with a <span class="type__result text-Dark-Cyan">${a.Type}</span> 
                        type of bean. 
                        <span class="weight__result text-Dark-Cyan">${a.Weight}</span> ground ala 
                        <span class="sensory__result text-Dark-Cyan">${a.Sensory}</span>, 
                        sent to me <span class="time__result text-Dark-Cyan">${a.Time}</span>.”
                    </p>
                </div>
            </article>
            `),c.length!==0&&(console.log("Faltan opciones en el plan:",c),p.innerHTML=`<span class="text-Light-Cream font-bold text-lg">
                Debes elegir las siguientes opciones: ${c.join(", ")}
            </span>`,p.classList.replace("max-h-0","h-12"))})},Q=()=>{document.querySelector(".btn__checkout").addEventListener("click",()=>{b.classList.add("hidden"),B.disabled=!0,v.forEach(n=>{n.classList.replace("h-auto","max-h-0")}),u.forEach((n,t)=>{if(t===2){const s=u[0].getBoundingClientRect().left,l=n.getBoundingClientRect().left-s;_.style.width=`${l}px`,n.classList.remove("opacity-0"),n.classList.add("opacity-100"),console.log(`Línea ajustada a ${l}px de ancho`)}})})},U=()=>{document.querySelector(".close__span").addEventListener("click",()=>{b.classList.replace("flex","hidden"),d.innerHTML="",d.classList.remove("p-10"),d.classList.add("max-h-0","p-0"),r=[],console.log(r),D.removeChild(i),console.log("pElement ha sido removido."),document.querySelectorAll(".option").forEach(t=>{t.classList.remove("active","bg-Dark-Cyan","text-Very-light-button"),t.classList.add("bg-Box-Cream","text-Very-Dark-Cyan","hover:bg-Pale-Orange")}),v.forEach((t,s)=>{s>=S&&(t.classList.remove("h-auto"),t.classList.add("max-h-0"))}),Y(S)})},q=e=>{const n=document.querySelectorAll(".step");if(e<n.length-1){const s=n[e+1].querySelector(".narrow");s&&(s.classList.remove("rotate-0"),s.classList.add("rotate-180"),console.log(`Ícono del step ${e+2} rotado a 0 grados`))}},g=e=>{E.forEach((n,t)=>{e>0&&t===e&&(n.classList.add("text-Dark-Cyan"),n.classList.remove("text-Very-Dark-Cyan"))})},X=()=>{const e=document.querySelector("#step5"),n=e==null?void 0:e.querySelector(".narrow");n&&(n.classList.remove("rotate-0"),n.classList.add("rotate-180"),console.log("Ícono rotado a 0 grados en el último paso"))},A=()=>{document.querySelectorAll(".step .narrow").forEach((n,t)=>{t>1&&(n.classList.remove("rotate-180"),n.classList.add("rotate-0"),console.log(`Ícono en el paso ${t+1} rotado a 180 grados`))})},w=e=>{const n=e.closest(".step"),t=Array.from(document.querySelectorAll(".step")).indexOf(n);return console.log("Índice del step actual:",t),t},Y=e=>{document.querySelectorAll(".step").forEach((t,s)=>{if(s>=e){const o=t.querySelector(".narrow");o&&(o.classList.remove("rotate-180"),o.classList.add("rotate-0"),console.log(`Ícono en step ${s+1} reseteado a 0 grados`))}}),E.forEach((t,s)=>{s>=e&&(t.classList.remove("text-Dark-Cyan"),t.classList.add("text-Very-Dark-Cyan"),console.log(`Color reseteado para el menú en el índice: ${s}`))})};W();j();z();G();J();K();Q();U();
